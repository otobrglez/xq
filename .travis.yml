language: go

go:
  - 1.5

addons:
  artifacts: true

sudo: false

install:
  - go get github.com/moovweb/gokogiri

env:
  matrix:
    - GIMME_OS=linux GIMME_ARCH=amd64 ARTIFACTS_TARGET_PATHS="$TRAVIS_BRANCH/$GIMME_OS/$GIMME_ARCH"
    - GIMME_OS=linux GIMME_ARCH=386 ARTIFACTS_TARGET_PATHS="$TRAVIS_BRANCH/$GIMME_OS/$GIMME_ARCH"
    - GIMME_OS=darwin GIMME_ARCH=amd64 ARTIFACTS_TARGET_PATHS="$TRAVIS_BRANCH/$GIMME_OS/$GIMME_ARCH"
    - GIMME_OS=darwin GIMME_ARCH=386 ARTIFACTS_TARGET_PATHS="$TRAVIS_BRANCH/$GIMME_OS/$GIMME_ARCH"
    - GIMME_OS=windows GIMME_ARCH=amd64 ARTIFACTS_TARGET_PATHS="$TRAVIS_BRANCH/$GIMME_OS/$GIMME_ARCH"
    - GIMME_OS=windows GIMME_ARCH=386 ARTIFACTS_TARGET_PATHS="$TRAVIS_BRANCH/$GIMME_OS/$GIMME_ARCH"

  global:
    - CGO_ENABLED=1
    - ARTIFACTS_DEBUG=1

script:
  - go build -o xq-$TRAVIS_BRANCH-$GIMME_OS-$GIMME_ARCH -v ./.
  - make test
  - echo $ARTIFACTS_TARGET_PATHS

notifications:
  email: false
